<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for Base\EntitiesBaseContract.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">Base/</a> EntitiesBaseContract.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/28</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/2</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/16</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/31</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// SPDX-License-Identifier: GPL-3.0
&nbsp;
pragma solidity 0.8.7;
&nbsp;
/*
  Entities Base Abstract contract.
    Items -&gt; Entities : exploits the functionality in Item Library.
    Entities -&gt; Owners &amp; Providers &amp; Pools : will be used by Certificate Pools and Providers
&nbsp;
Defines a list of entities types where the first one is "Owners" and control the CRUD operations of all the others
&nbsp;
EVENTS are copied from ItemLibrary so that they are included in the contracts ABI, otherwise they can be very tricky to retrieve from web3
  
 */
&nbsp;
import "../Libraries/Library.sol";
import "../Libraries/AddressLibrary.sol";
import "../Libraries/ItemsLibrary.sol";
&nbsp;
abstract contract EntitiesBaseContract{
    using Library for *;
    using AddressLibrary for *;
    using ItemsLibrary for *;
&nbsp;
    // EVENTS /////////////////////////////////////////
    // copied from ItemLibrary.......
    event _AddItemValidation(string ItemType,  bytes32 indexed Item,  string Info);
    event _RemoveItemValidation(string ItemType,  bytes32 indexed Item,  string Info);
    event _AddItemRejection(string ItemType,  bytes32 indexed Item,  string Info);
    event _RemoveItemRejection(string ItemType,  bytes32 indexed Item,  string Info);
&nbsp;
    // DATA /////////////////////////////////////////
    // owners
    uint256 internal _ownerId;
    uint256 internal _minOwners;
&nbsp;
    // Total Owners and other Entities
    ItemsLibrary._ItemsStruct[] internal _Entities;
    string[] internal _entitiesLabel;
&nbsp;
    // MODIFIERS /////////////////////////////////////////
<span class="fstat-no" title="function not covered" >    modifier isSomeoneSpecific(address addr, address someone){</span>
<span class="cstat-no" title="statement not covered" >        Library.ItIsSomeone(addr, someone)</span>;
        _;
    }
    
<span class="fstat-no" title="function not covered" >    modifier isIdCorrect(uint Id, uint length){</span>
<span class="cstat-no" title="statement not covered" >        Library.IdCorrect(Id, length)</span>;
        _;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    modifier isAnOwner(address addr){</span>
<span class="cstat-no" title="statement not covered" >        isAnOwnerFunc(addr)</span>;
        _;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function isAnOwnerFunc(address addr) internal view{</span>
<span class="cstat-no" title="statement not covered" >        require(true == isEntity(addr, _ownerId), "EC9-")</span>;
    }
&nbsp;
    // FUNCTIONALITY /////////////////////////////////////////
<span class="fstat-no" title="function not covered" >    function addEntity(address entity, string calldata entityInfo, uint listId) internal </span>
        isIdCorrect(listId, _Entities.length) 
        isAnOwner(msg.sender)
    { 
<span class="cstat-no" title="statement not covered" >        (ItemsLibrary._manipulateItemStruct memory manipulateItemStruct,</span>
            ItemsLibrary._ItemsStruct storage itemsstruct) = GenerateStructsEntity(entity, entityInfo, listId);
&nbsp;
<span class="cstat-no" title="statement not covered" >        ItemsLibrary.addItem(manipulateItemStruct, itemsstruct, address(this))</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function removeEntity(address entity, uint listId) internal </span>
        isIdCorrect(listId, _Entities.length) 
        isAnOwner(msg.sender)
    {
<span class="cstat-no" title="statement not covered" >        (ItemsLibrary._manipulateItemStruct memory manipulateItemStruct,</span>
            ItemsLibrary._ItemsStruct storage itemsstruct) = GenerateStructsEntity(entity, "", listId);
&nbsp;
<span class="cstat-no" title="statement not covered" >        ItemsLibrary.removeItem(manipulateItemStruct, itemsstruct, address(this))</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function validateEntity(address entity, uint listId) internal </span>
        isIdCorrect(listId, _Entities.length) 
        isAnOwner(msg.sender)
    {
<span class="cstat-no" title="statement not covered" >        (ItemsLibrary._manipulateItemStruct memory manipulateItemStruct,</span>
            ItemsLibrary._ItemsStruct storage itemsstruct) = GenerateStructsEntity(entity, "", listId);
&nbsp;
<span class="cstat-no" title="statement not covered" >        ItemsLibrary.validateItem(manipulateItemStruct, itemsstruct, address(this))</span>;
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function rejectEntity(address entity, uint listId) internal </span>
        isIdCorrect(listId, _Entities.length) 
        isAnOwner(msg.sender) 
    {
<span class="cstat-no" title="statement not covered" >        (ItemsLibrary._manipulateItemStruct memory manipulateItemStruct,</span>
            ItemsLibrary._ItemsStruct storage itemsstruct) = GenerateStructsEntity(entity, "", listId);
&nbsp;
<span class="cstat-no" title="statement not covered" >        ItemsLibrary.rejectItem(manipulateItemStruct, itemsstruct, address(this))</span>; 
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function GenerateStructsEntity(address entity, string memory entityInfo, uint listId) internal view</span>
        returns(ItemsLibrary._manipulateItemStruct memory, ItemsLibrary._ItemsStruct storage)
    {
<span class="cstat-no" title="statement not covered" >        bytes32 entityInBytes = AddressLibrary.AddressToBytes32(entity);</span>
<span class="cstat-no" title="statement not covered" >        uint[] memory listIdArray = new uint[](1);</span>
<span class="cstat-no" title="statement not covered" >        listIdArray[0] = listId</span>;
<span class="cstat-no" title="statement not covered" >        ItemsLibrary._manipulateItemStruct memory manipulateItemStruct = ItemsLibrary._manipulateItemStruct(entityInBytes, entityInfo, _minOwners, _entitiesLabel[listId], listIdArray);</span>
<span class="cstat-no" title="statement not covered" >        ItemsLibrary._ItemsStruct storage itemsstruct =  _Entities[listId];</span>
<span class="cstat-no" title="statement not covered" >        return (manipulateItemStruct, itemsstruct);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function retrieveEntity(address entity, uint listId) internal </span>
        isIdCorrect(listId, _Entities.length)
    view returns (ItemsLibrary._itemIdentity memory) 
    {
<span class="cstat-no" title="statement not covered" >        bytes32 entityInBytes = AddressLibrary.AddressToBytes32(entity);</span>
<span class="cstat-no" title="statement not covered" >        return ItemsLibrary.retrieveItem(entityInBytes, _Entities[listId]);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function retrieveAllEntities(uint listId) internal </span>
        isIdCorrect(listId, _Entities.length) 
    view returns (bytes32[] memory) 
    {
<span class="cstat-no" title="statement not covered" >        return ItemsLibrary.retrieveAllItems(_Entities[listId]);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function isEntity(address entity, uint listId) internal </span>
        isIdCorrect(listId, _Entities.length)
    view returns (bool)
    {
<span class="cstat-no" title="statement not covered" >        bytes32 entityInBytes = AddressLibrary.AddressToBytes32(entity);</span>
<span class="cstat-no" title="statement not covered" >        return ItemsLibrary.isItem(entityInBytes, _Entities[listId]);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function isEntityPendingToRemoved(address entity, uint listId) internal </span>
        isIdCorrect(listId, _Entities.length)
    view returns (bool)
    {
<span class="cstat-no" title="statement not covered" >        bytes32 entityInBytes = AddressLibrary.AddressToBytes32(entity);</span>
<span class="cstat-no" title="statement not covered" >        return ItemsLibrary.isItemPendingToRemoved(entityInBytes, _Entities[listId]);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function retrievePendingEntities(bool addORemove, uint listId) internal </span>
         isIdCorrect(listId, _Entities.length)
    view returns (bytes32[] memory)
    {
<span class="cstat-no" title="statement not covered" >        bytes32[] memory EntitiesInBytes;</span>
<span class="cstat-no" title="statement not covered" >        (EntitiesInBytes) = ItemsLibrary.retrievePendingItems(addORemove, _Entities[listId])</span>;
<span class="cstat-no" title="statement not covered" >        return EntitiesInBytes;</span>
    }
&nbsp;
    // CALLBACKS /////////////////////////////////////////
<span class="fstat-no" title="function not covered" >    function onItemValidated(bytes32 item, uint256[] calldata ids, bool addOrRemove) public virtual </span>
        isSomeoneSpecific(msg.sender, address(this))
    {}
&nbsp;
<span class="fstat-no" title="function not covered" >    function onItemRejected(bytes32 item, uint256[] calldata ids, bool addOrRemove) public virtual </span>
        isSomeoneSpecific(msg.sender, address(this))
    {}
&nbsp;
}</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Thu May 05 2022 13:13:49 GMT+0200 (heure d’été d’Europe centrale)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
